# Программы клиента и сервера, взаимодействующие через разделяемую память с использованием функций POSIX (Дз 9)

## Исполнитель
- **ФИО:** Чекмарев Трофим Владимирович
- **Группа:** БПИ-245

## Краткое описание программы

Реализованы две независимые программы:

- **Сервер (`shared-memory-server.c`)** - создаёт/открывает POSIX-сегмент разделяемой памяти `posix-shar-object`, отображает его через `mmap`, читает из него числа, приходящие от клиента, и выводит их на экран. При завершении освобождает ресурсы и удаляет сегмент (`shm_unlink`).
- **Клиент (`shared-memory-client.c`)** - открывает тот же сегмент, отображает его через `mmap`, автоматически генерирует случайные числа в диапазоне 0-999 и записывает их в разделяемую память. Сервер и клиент используют общую структуру `message_t` с полями: тип сообщения, текстовое представление числа и PID обоих процессов.

## Описание варианта корректного завершения

Корректное завершение реализовано с помощью:

- хранения PID клиента и сервера в разделяемой памяти;
- обработчиков сигналов `SIGINT` и `SIGTERM` в обоих процессах.

При нажатии `Ctrl+C` в одном из процессов:

1. Обработчик сигнала в этом процессе:
   - ставит флаг завершения,
   - записывает в разделяемую память тип `MSG_TYPE_FINISH`,
   - отправляет второму процессу сигнал `SIGTERM` по его PID.
2. Оба процесса выходят из своих циклов, корректно освобождают ресурсы.
3. Сервер дополнительно удаляет сегмент разделяемой памяти вызовом `shm_unlink`.

Таким образом, при попытке завершить один процесс автоматически завершается и второй, а сегмент разделяемой памяти корректно удаляется.

